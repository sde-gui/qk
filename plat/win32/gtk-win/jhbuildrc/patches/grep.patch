diff -r e6ccdf9eef47 src/Makefile.in
--- a/src/Makefile.in	Wed Mar 31 22:24:23 2010 -0700
+++ b/src/Makefile.in	Wed Mar 31 22:30:44 2010 -0700
@@ -732,7 +732,7 @@
 AM_CFLAGS = $(WARN_CFLAGS) $(WERROR_CFLAGS)
 
 # Tell the linker to omit references to unused shared libraries.
-AM_LDFLAGS = $(IGNORE_UNUSED_LIBRARIES_CFLAGS)
+AM_LDFLAGS = $(IGNORE_UNUSED_LIBRARIES_CFLAGS) -mwindows
 grep_SOURCES = grep.c
 egrep_SOURCES = egrep.c
 fgrep_SOURCES = fgrep.c
diff -r e6ccdf9eef47 src/kwset.c
--- a/src/kwset.c	Wed Mar 31 22:24:23 2010 -0700
+++ b/src/kwset.c	Wed Mar 31 22:30:44 2010 -0700
@@ -31,11 +31,6 @@
 
 #include <config.h>
 #include <sys/types.h>
-#include "system.h"
-#include "kwset.h"
-#include "obstack.h"
-
-#define link kwset_link
 
 #ifdef GREP
 # include "xalloc.h"
@@ -43,6 +38,12 @@
 # define malloc(s) xmalloc(s)
 #endif
 
+#include "system.h"
+#include "kwset.h"
+#include "obstack.h"
+
+#define link kwset_link
+
 #define NCHAR (UCHAR_MAX + 1)
 #define obstack_chunk_alloc malloc
 #define obstack_chunk_free free
