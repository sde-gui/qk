diff -r 0ba2c505d055 gettext-runtime/intl/Makefile.in
--- a/gettext-runtime/intl/Makefile.in	Wed Mar 31 21:28:19 2010 -0700
+++ b/gettext-runtime/intl/Makefile.in	Wed Mar 31 21:45:49 2010 -0700
@@ -280,15 +280,11 @@
 # so that they work with the sed-3.02 that is shipped with MSYS. We can use
 # GNU bash's $'\n' syntax to obtain such a newline.
 libintl.res: $(srcdir)/libintl.rc
-	nl=$$'\n'; \
-	sed_extract_major='/^[0-9]/{'$${nl}'s/^\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_minor='/^[0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
-	sed_extract_subminor='/^[0-9][0-9]*[.][0-9][0-9]*[.][0-9]/{'$${nl}'s/^[0-9]*[.][0-9]*[.]\([0-9]*\).*/\1/p'$${nl}q$${nl}'}'$${nl}'c\'$${nl}0$${nl}q; \
 	$(WINDRES) \
 	  "-DPACKAGE_VERSION_STRING=\\\"$(VERSION)\\\"" \
-	  "-DPACKAGE_VERSION_MAJOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_major"` \
-	  "-DPACKAGE_VERSION_MINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_minor"` \
-	  "-DPACKAGE_VERSION_SUBMINOR="`echo '$(VERSION)' | sed -n -e "$$sed_extract_subminor"` \
+	  "-DPACKAGE_VERSION_MAJOR="`echo '$(VERSION)' | sed -r -e 's/([0-9]+)[.]([0-9]+)/\1/'` \
+	  "-DPACKAGE_VERSION_MINOR="`echo '$(VERSION)' | sed -r -e 's/([0-9]+)[.]([0-9]+)/\1/'` \
+	  "-DPACKAGE_VERSION_SUBMINOR="0 \
 	  -i $(srcdir)/libintl.rc -o libintl.res --output-format=coff
 
 ref-add.sed: $(srcdir)/ref-add.sin
