;;
;;  mooterm/mooterm-pygtk.defs
;;

; object definitions ...

(define-object Term

  (in-module "Moo")
  (parent "GtkWidget")
  (c-name "MooTerm")
  (gtype-id "MOO_TYPE_TERM")
)

(define-boxed TermCommand
  (in-module "Moo")
  (c-name "MooTermCommand")
  (gtype-id "MOO_TYPE_TERM_COMMAND")
  (copy-func "moo_term_command_copy")
  (release-func "moo_term_command_free")
  (fields
    '("char*" "cmd_line")
    '("char**" "argv")
  )
)

(define-boxed TermProfile
  (in-module "Moo")
  (c-name "MooTermProfile")
  (gtype-id "MOO_TYPE_TERM_PROFILE")
  (copy-func "moo_term_profile_copy")
  (release-func "moo_term_profile_free")
  (fields
    '("char*" "name")
    '("MooTermCommand*" "cmd")
    '("char**" "envp")
    '("char*" "working_dir")
  )
)


;; MooTerm methods

(define-function moo_term_new
  (c-name "moo_term_new")
  (is-constructor-of "MooTerm")
  (return-type "MooTerm*")
  (parameters
    '("guint" "width")
    '("guint" "height")
  )
)

(define-method feed
  (of-object "MooTerm")
  (c-name "moo_term_feed")
  (return-type "none")
  (parameters
    '("const-gchar*" "data")
    '("int" "len" (default "-1"))
  )
)

(define-method feed_child
  (of-object "MooTerm")
  (c-name "moo_term_feed_child")
  (return-type "none")
  (parameters
    '("const-gchar*" "data")
    '("int" "len" (default "-1"))
  )
)

(define-method fork_command_line
  (of-object "MooTerm")
  (c-name "moo_term_fork_command_line")
  (return-type "gboolean")
  (parameters
    '("const-gchar*" "cmd_line")
    '("const-gchar*" "working_dir" (null-ok) (default "NULL"))
    '("char**" "envp" (null-ok) (default "NULL"))
    '("GError**" "error" (null-ok) (default "NULL"))
  )
)

(define-method fork_argv
  (of-object "MooTerm")
  (c-name "moo_term_fork_argv")
  (return-type "gboolean")
  (parameters
    '("char**" "argv")
    '("const-gchar*" "working_dir" (null-ok) (default "NULL"))
    '("char**" "envp" (null-ok) (default "NULL"))
    '("GError**" "error" (null-ok) (default "NULL"))
  )
)

(define-method fork_command
  (of-object "MooTerm")
  (c-name "moo_term_fork_command")
  (return-type "gboolean")
  (parameters
    '("const-MooTermCommand*" "cmd")
    '("const-gchar*" "working_dir" (null-ok) (default "NULL"))
    '("char**" "envp" (null-ok) (default "NULL"))
    '("GError**" "error" (null-ok) (default "NULL"))
  )
)


;; MooTermProfile

(define-function moo_term_profile_new
  (c-name "moo_term_profile_new")
  (is-constructor-of "MooTermProfile")
  (return-type "MooTermProfile*")
  (parameters
    '("char*" "name" (null-ok) (default "NULL"))
    '("const-MooTermCommand*" "cmd" (null-ok) (default "NULL"))
    '("char**" "envp" (null-ok) (default "NULL"))
    '("char*" "working_dir" (null-ok) (default "NULL"))
  )
)

(define-function moo_term_command_new
  (c-name "moo_term_command_new")
  (is-constructor-of "MooTermCommand")
  (return-type "MooTermCommand*")
  (parameters
    '("char*" "cmd_line" (null-ok) (default "NULL"))
    '("char**" "argv" (null-ok) (default "NULL"))
  )
)
