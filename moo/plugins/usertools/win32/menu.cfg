# -%- strip: false; indent-width: 2 -%-
[tool]
id = SortLines2
name = Sort Lines 2
type = lua
options = need-doc
  lines = doc.selected_lines()
  table.sort(lines)
  -- -- table.foreach(lines, print)
  doc.replace_selected_lines(lines)
  
  -- lines = doc.selected_lines()
  -- uniq_lines = {}
  -- for _, line in pairs(lines) do
  --   if (#line ~= 0) then
  --     uniq_lines[line] = true
  --   end
  -- end
  -- lines = {}
  -- for line, _ in uniq_lines do
  --   table.insert(lines, line)
  -- end
  -- table.sort(lines)
  -- -- table.foreach(lines, print)
  -- doc.replace_selected_lines(lines)

[tool]
id=Math
file-filter=*.tex
type=lua
name=Math
options=need-doc
accel=<alt>M
  if doc.has_selection() then
    doc.replace_selected_text('$' .. doc.selected_text() .. '$')
  else
    pos = doc.cursor_pos()
    doc.insert_text('$ $')
    doc.set_selection(pos + 1, pos + 2)
  end
  

[tool]
id=InsertDateAndTime
type=python
name=Insert Date and Time
options=need-doc
  # insert_date_and_time.py is installed in
  # $prefix/lib/moo/plugins/lib
  from insert_date_and_time import get_format
  import time
  
  fmt = get_format(window)
  if fmt is not None:
      buffer.insert_at_cursor(time.strftime(fmt))
  
